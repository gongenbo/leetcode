```
public int maxProfit(int[] prices) {
    int maxProfit = 0;
    int len = prices.length;
    if(len <2) return maxProfit;
    int[] dp = new int[len];
    dp[0] = 0;
    dp[1] = Math.max(0, prices[1] - prices[0]);
    int minPrices = prices[0] < prices[1]?prices[0]:prices[1];
    for(int i = 2; i < len; i++){
        dp[i] = Math.max(prices[i]-minPrices,dp[i-1]);
        minPrices = Math.min(prices[i],minPrices);
    }
    return dp[len-1];
}
```
